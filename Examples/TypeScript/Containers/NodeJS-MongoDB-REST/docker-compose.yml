services:
  nodejs-typescript-mongodb-rest-api:
    build: .
    image: nodejs-typescript-mongodb-rest-api
    ports:
      - '3000:80'
    environment:
      - NODE_ENV=production
    env_file:
      - .env
  grafana-alloy:
    image: grafana/alloy:v1.3.1
    volumes:
      - "./config/config.alloy:/etc/alloy/config.alloy"
    env_file:
      - .env
    command: [
      "run",
      "--server.http.listen-addr=0.0.0.0:12345",
      "--stability.level=public-preview",
      "/etc/alloy/config.alloy",
    ]